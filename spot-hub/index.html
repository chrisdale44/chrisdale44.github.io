<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spot Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }

      .pacifico {
        font-family: "Pacifico", cursive;
      }

      .white-bullets {
        list-style-type: none;
        padding-left: 1.5rem;
      }
      .white-bullets li::before {
        content: "○";
        color: #000;
        display: inline-block;
        width: 1em;
        margin-left: -1em;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900">
    <div class="container mx-auto p-4 pb-8 max-w-4xl">
      
<div
  class="flex flex-col items-center text-md bg-white border-none focus:outline-none [box-shadow:rgba(0,_0,_0,_0.3)_0px_1px_4px_-1px] rounded min-w-[340px]"
>
  <div class="bg-[#157] flex align-center justify-center items-center text-center w-full relative">
        <a href="/" class="text-white absolute left-4 block p-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
    <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
</svg>

        </a>
    <a href="https://spot-hub.app" target="_blank"
      ><h1 class="pacifico text-white text-2xl sm:text-4xl p-4">
        Spot Hub - Technical Overview
      </h1></a
    >
  </div>
  <div class="px-8 pb-8">
    <div class="my-8 flex flex-col md:flex-row gap-4">
      <div class="flex-1">
        <section class="text-sm">
          <h2 class="text-md font-bold mb-4 pb-2">
            A Progressive Web App designed to map action sports locations and 
            user-generated media on a global scale
          </h2>
          <p class="mb-4 text-sm">
            Designed to fill a gap in the action sports community, Spot Hub enables 
            users to discover spots and street obstacles around 
            the world, and document the history of tricks performed at
            each location. With a functional MVP version currently in alpha
            release phase, the app is slated for public release later this year,
            with additional features and improvements to be rolled out
            iteratively.
          </p>
          <p class="text-sm">
            The Spot Hub codebase is currently private for security reasons but <a href="https://github.com/chrisdale44/spot-hub-samples"><strong>code 
            samples</strong></a> are available <a href="https://github.com/chrisdale44/spot-hub-samples" class="underline">here</a> 
            and full access to the Github repo can be granted upon request.
          </p>
        </section>
      </div>
      <div class="max-h-96 flex-1 text-center">
        <a href="https://spot-hub.app" target="_blank"
          ><img
            src="/assets/spot-hub/main.jpg"
            alt="Spot Hub"
            class="max-h-96 min-w-48"
        /></a>
        <a
          href="https://spot-hub.app"
          target="_blank"
          class="text-blue-600 hover:text-blue-800 text-sm mb-6 text-center"
          >spot-hub.app</a
        >
        <p class="text-xs text-[#666]">
          <strong>Demo credentials:</strong> spothubdemo@gmail.com / spothub123
        </p>
      </div>
    </div>
    <section class="mb-8 text-sm w-full">
      <h2 class="text-xl font-bold mb-4 border-b pb-2">Table of Contents</h2>
      <ol class="list-decimal pl-8">
        <li>
          <a class="pl-1 hover:text-blue-600" href="#objectives">Objectives</a>
        </li>
        <li>
          <a class="pl-1 hover:text-blue-600" href="#technical-implementation"
            >Technologies</a
          >
        </li>
        <li>
          <a class="pl-1 hover:text-blue-600" href="#performance"
            >Performance Optimisations</a
          >
        </li>
        <li>
          <a class="pl-1 hover:text-blue-600" href="#user-experience"
            >User Experience</a
          >
        </li>
        <li>
          <a class="pl-1 hover:text-blue-600" href="#next-steps">Next Steps</a>
        </li>
      </ol>
    </section>
    <section class="mb-8 text-sm w-full" id="objectives">
      <h2 class="text-xl font-bold mb-4 border-b pb-2">Objectives</h2>
      <ul class="list-disc space-y-2 text-md px-8">
        <li class="text-sm">
          <strong>Optimised Performance:</strong> Ensure fast, smooth and
          lag-free rendering of thousands — potentially tens of thousands — of
          map pins around the world.
        </li>
        <li>
          <strong>Streamlined Content Management:</strong> Simplify the process
          of adding spots, images, and related information.
        </li>
        <li>
          <strong>Intuitive Discovery:</strong> Enable effortless filtering of
          spots and search functionality.
        </li>
        <li>
          <strong>Cross-Platform Compatibility:</strong> Full functionality
          across Web, Android, and iOS devices.
        </li>
        <li>
          <strong>Cost-Efficient Scalability:</strong> Scale dynamically while
          minimising infrastructure expenses.
        </li>
      </ul>
    </section>
    <section class="mb-8 text-sm w-full" id="technical-implementation">
      <h2 class="text-xl font-bold mb-4 border-b pb-2">
        Technologies
      </h2>
      <div class="text-sm md:px-4 overflow-x-auto">
        <ul class="list-disc pl-4 columns-2 md:columns-3 lg:columns-4 gap-4">
          <li>Javascript</li>
          <li>NodeJS</li>
          <li>React</li>
          <li>NextJS</li>
          <li>Jotai</li>
          <li>MapLibreGL</li>
          <li>DeckGL</li>
          <li>Supabase</li>
          <li>Google OAuth</li>
          <li>Yup</li>
          <li>Cloudinary CDN</li>
          <li>Google Cloud Platform</li>
          <li>Gemini API</li>
          <li>React Intersection Observer</li>
          <li>ShadCN</li>
          <li>TailwindCSS</li>
          <li>DexieJS</li>
          <li>Redis (Upstash)</li>
          <li>Serwist</li>
          <li>Netlify</li>
          <li>Vitest + React Testing Library</li>
          <li>Sentry</li>
          <li>ESLint + Prettier</li>
          <li>Git + GitHub</li>
          <li>Responsive Design</li>
        </ul>
      </div>
    </section>
    <section class="mb-8 text-sm w-full" id="performance">
      <h2 class="text-xl font-bold mb-4 border-b pb-2">
        Performance Optimisations
      </h2>
      <h3 class="text-xl font-semibold mt-6 mb-3">WebGL</h3>
      <p class="mb-4">
        In order for Spot Hub to handle large numbers of map pins while maintaining smooth, 
        lag-free movement and scrolling around the map, the DeckGL library has been implemented.
        DeckGL is a WebGL-powered library that leverages GPU acceleration for
        significantly faster rendering and smoother interactivity, resulting in
        a highly scalable map pin layer.
      </p>
      <h3 class="text-xl font-semibold mt-6 mb-3">Images</h3>
      <ul class="list-disc pl-6 space-y-2">
        <li>
          <strong>CDN Delivery:</strong> Spot Hub uses Cloudinary to store
          images as their CDN provides low-latency delivery worldwide
        </li>
        <li>
          <strong>Image size:</strong> Cloudinary is configured to automatically
          optimise images as they are uploaded (a feature available to admin
          users only). Images are compressed, converted to WebP format, resized
          to a maximum dimension of 1000px, as well as watermarked with the Spot
          Hub logo
        </li>
        <li>
          <strong>Thumbnails:</strong> Thumbnail versions of spot images are
          automatically generated by Cloudinary (200x200px) to provide a
          faster-loading preview image for each each spot
        </li>
        <li>
          <strong>Lazy Loading:</strong> A combination of the Intersection
          Observer API and lazy-loading attribute (using NextJS Image component)
          are used to reduce the number of images loaded on initial page load
        </li>
        <li>
          <strong>SVG Icons:</strong> SVG's are used for icons throughout Spot
          Hub to provide light-weight and styleable vector icons that reduce
          HTTP requests, improve rendering performance, and scale perfectly
          across all devices
        </li>
        <li>
          <strong>Service Worker:</strong> Caches images using the browser cache
          API to reduce HTTP requests
        </li>
      </ul>
      <h3 class="text-xl font-semibold mt-6 mb-3">
        Data Pre-Fetching and Caching Strategy
      </h3>
      <p class="mb-4">
        Spot Hub uses a grid-based system for data fetching in order to simplify
        data caching. Each grid square has a unique ID based on its coordinates.
        On initial page load, two concurrent requests for spot data are made to
        the database:
      </p>
      <ol class="list-decimal pl-6 space-y-2 mb-4">
        <li>
          Fetch a shallow set of spot data for all spots worldwide. Shallow spot
          data provides enough data to display map pins and their thumbnails but
          does not contain all the data about each spot. If there are more than
          5000 spots worldwide (~1MB data) then multiple paginated requests are
          made to the database in the background until all spots are fetched.
          Fetching this shallow spot data up front means that browsing,
          filtering and displaying map pins worldwide is almost instantaneous.
        </li>
        <li>
          Pre-fetch complete spot data for grid squares surrounding the visible
          search area. This could be the users' viewport, or in the example
          below, is a 25km search radius (pre-fetched grid squares highlighted
          in green). Grid square ID's along with timestamp and cache depth
          (shallow or complete) are stored in IndexedDB to prevent future
          duplicate requests for the same grid squares.
        </li>
      </ol>
      <div class="my-6">
        <img
          src="/assets/spot-hub/fetching-2.jpg"
          alt="Spot data fetching visualisation"
          class="w-full"
        />
      </div>
      <p class="mb-4">
        As the user moves their search area (or viewport) around the map, map
        pins are instantly displayed using the shallow spot data. Complete spot
        data is pre-fetched in the background after determining which grid
        squares have not been previously fetched (shown in orange below). These
        orange grid square ID's are then cross-referenced with the shallow spot
        data to determine which ones contain spots and only make a database
        request if any grid squares contain spots, preventing unnecessary calls
        to the database.
      </p>
      <p class="mb-4">
        If the user interacts with a map pin before the pre-fetched full spot
        data has been received then a request is made to the database for that
        single spot data.
      </p>
      <p class="mb-4">
        In order to prevent requesting too many grid squares at once when the
        user zooms out on the map, grid squares are only requested below a
        certain zoom level.
      </p>
      <div class="my-6">
        <img
          src="/assets/spot-hub/fetching-3.jpg"
          alt="Spot data fetching visualisation"
          class="w-full"
        />
      </div>
      <h3 class="text-xl font-semibold mt-6 mb-3">
        Local-First Caching Strategy
      </h3>
      <div class="my-6">
        <img
          src="/assets/spot-hub/caching.png"
          alt="Spot Hub caching strategy"
          class="w-full"
        />
      </div>
      <p class="mb-2">The flow for fetching spot data:</p>
      <ol class="list-decimal pl-6 space-y-1">
        <li>
          Check IndexedDB <br />
          1.a. If found, check cache timestamp <br />
          1.b. If data is not stale return data, otherwise continue
        </li>
        <li>Call to Server Action (running on Netlify Edge Server)</li>
        <li>
          Check Redis cache <br />
          3.a. If found, check cache timestamp <br />
          3.b. If data is not stale return data, otherwise continue
        </li>
        <li>
          HTTP fetch to Supabase <br />
          4.a. Edge Server checks in-memory cache for previous matching request
          <br />
          4.b. If found, check cache timestamp <br />
          4.c. If data is not stale return data, otherwise continue <br />
        </li>
        <li>Request made to Supabase</li>
      </ol>
    </section>
    <section class="mb-8 text-sm w-full" id="user-experience">
      <h2 class="text-xl font-bold mb-4 border-b pb-2">User Experience</h2>
      <h3 class="text-xl font-semibold mt-6 mb-3">Image Geolocation</h3>
      <p class="mb-4">
        The user experience of adding spots around the globe is streamlined by
        extracting image geolocation data (if available) to automatically move
        map pins to their correct location.
      </p>
      <div class="my-6">
        <img
          src="/assets/spot-hub/spot-upload.gif"
          alt="Spot upload demonstration"
          class="w-full"
        />
      </div>
      <p class="mb-4">
        The batch upload features allows up to 50 images to be selected at once.
        It uses image geolocation data to automatically group images in close
        proximity together (i.e. photos of the same spot). A drag and drop
        interface then allows the user to make any corrections to the groups
        before creating each spot individually.
      </p>
      <div class="my-6">
        <img
          src="/assets/spot-hub/batch-upload.gif"
          alt="Batch upload demonstration"
          class="w-full"
        />
      </div>
      <h3 class="text-xl font-semibold mt-6 mb-3">AI Image Analysis</h3>
      <p class="mb-4">
        To enhance the image tagging process, Google's Gemini AI is used to analyse spot 
        images along with a predefined prompt to generate a set of suggested tags.
      </p>
      <div class="my-6">
        <img
          src="/assets/spot-hub/tag-suggestions.gif"
          alt="AI Tag Suggestions demonstration"
          class="w-full"
        />
      </div>
    </section>
    <section class="mb-8 text-sm w-full" id="next-steps">
      <h2 class="text-xl font-bold mb-4 border-b pb-2">Next Steps</h2>
      <h3 class="text-xl font-semibold mt-6 mb-3">Beta Release Goals</h3>
      <ul class="list-disc pl-6 space-y-2">
        <li>
          <strong class="text-md font-bold mb-1"
            >Instagram API Integration:</strong
          >
          To display related posts for each map pin
        </li>
        <li>
          <strong class="text-md mt-1 font-bold mb-1"
            >Youtube API Integration:</strong
          >
          To display related Youtube videos for each map pin, with timestamped
          playback
        </li>
        <li>
          <strong class="text-md mt-1 font-bold mb-1">Facebook Auth:</strong>
          Implement Facebook Auth and make it the default login option as it
          affects Instagram API limits
        </li>
        <li>
          <strong class="text-md mt-1 font-bold mb-1">Code Rabbit:</strong> For
          AI powered code reviews
        </li>
        <li>
          <strong class="text-md mt-1 font-bold mb-1">PostHog:</strong> For Web
          Analytics, session recording and A/B testing
        </li>
        <li>
          <strong class="text-md font-bold mt-1 mb-1">Stripe:</strong> For
          handling a tiered pricing model to advanced app features
        </li>
        <li>
          <strong class="text-md mt-1 font-bold mb-1">Vitest/RTL:</strong>
          Improve test coverage across codebase
        </li>
        <li>
          <strong class="text-md mt-1 font-bold mb-1"
            >Playwright/Cypress:</strong
          >
          Add end-to-end test coverage
        </li>
      </ul>
      <h3 class="text-xl font-semibold mt-6 mb-3">
        Speculative Future Enhancements
      </h3>
      <ul class="list-disc pl-6 space-y-2">
        <li>
          <strong>Legend State</strong> or <strong>Zero Sync</strong> for
          local-first database syncing
        </li>
        <li>
          <strong>TypeScript</strong> for type safety and improved developer experience as the app grows in complexity
        </li>
        <li>
          <strong>Remix</strong> or <strong>Waku</strong> as a more performant
          alternative to NextJS
        </li>
        <li>
          <strong>Svelte</strong>, <strong>SolidJS</strong> or
          <strong>Astro</strong> as a more performant alternative to React
        </li>
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
